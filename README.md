# Домашнее задание к занятию «Базы данных, их типы» - "Засим Артем"


---

### Задание 1
Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.
Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.
1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?
1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.
1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?
1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?
1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.
1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?
1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?
Приведите ответ в свободной форме.

******************************

Для каждой из предложенных задач компании, занимающейся строительством, проектированием и девелопментом, важно выбрать подходящую СУБД, которая эффективно решит поставленные задачи, с учётом нужд в быстродействии, гибкости, целостности и простоте. Давайте рассмотрим каждую задачу.

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна обеспечивать целостность и чёткую структуру данных, а также поддерживать аналитические функции.

Рекомендуемая СУБД:

PostgreSQL или Microsoft SQL Server — это реляционные СУБД, которые предлагают высокий уровень согласованности данных, поддерживают сложные аналитические запросы, имеют встроенные инструменты для работы с финансовыми данными, а также поддерживают транзакционность, что важно для бюджетирования.
Google BigQuery — если предполагается работа с большими объемами данных, BigQuery предоставит инструменты для аналитики и прогнозирования в режиме реального времени.
Обе СУБД обеспечивают строгие правила для транзакций и целостности данных (ACID). Для анализа и прогнозирования рисков потребуется поддержка сложных запросов, агрегированных данных и аналитических функций, что лучше всего решается в реляционной модели данных.

1.1.* Хеширование стало занимать длительное время, какое API можно использовать для ускорения работы?
Для ускорения хеширования данных можно использовать специализированные библиотеки или API, такие как:

Hashlib (Python) — быстрая библиотека для хеширования строк, поддерживающая различные алгоритмы.
OpenSSL — предоставляет быстрые и эффективные реализации хеширования, в том числе на уровне криптографических стандартов.
Если хеширование используется в контексте базы данных, то стоит настроить индексы для более быстрой обработки запросов, так как в реляционных СУБД индексы могут существенно ускорить поиск данных.

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM.
Для лендингов и CRM важна гибкость, высокая скорость работы с большими объемами данных и возможность быстрого изменения структуры.

Рекомендуемая СУБД:
MongoDB — это документо-ориентированная СУБД, которая идеально подходит для хранения неструктурированных или полуструктурированных данных, таких как данные по лидам, формы с лендингов и другая информация, которая часто меняется.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?
Да, эту задачу можно решить одной СУБД, например, с помощью PostgreSQL или MySQL с использованием расширений для работы с JSON-данными.

PostgreSQL поддерживает работу с JSON и JSONB типами данных, что позволяет хранить как структурированные, так и неструктурированные данные в рамках одной реляционной базы. Это даёт гибкость для работы с данными по лидам с лендингов и их дальнейшей интеграции с CRM.
Использование реляционной СУБД даёт возможность хранить критичные данные (например, для клиентов и сделок) в строгой схеме и гарантировать их целостность.

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам.
Задача подразумевает хранение и доступность структурированных данных, которые будут использоваться для внутреннего обучения сотрудников.

Рекомендуемая СУБД:

PostgreSQL или MySQL — это реляционные базы данных, идеально подходящие для структурированных данных. Они обеспечат необходимую целостность, надёжность и удобство при работе с нормами, правилами и другими документами.
Почему:
Для данной задачи важно, чтобы база данных была логично структурирована, с четкими связями между таблицами (например, правила и соответствующие им пояснения). Реляционные СУБД обеспечат нужную гибкость и поддержку транзакционности.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?
Да, можно использовать PostgreSQL или MySQL для реализации этой задачи. Так как задачи по бюджету и контролю качества могут пересекаться в части использования одних и тех же данных, например, для формирования отчётов, вполне возможно использовать одну и ту же СУБД для хранения корпоративных норм и правил. Нужно будет создать отдельную схему или таблицы в рамках текущей базы данных.

1.4. Департамент логистики нуждается в решении задач по маршрутизации доставки материалов и распределению курьеров.
Задача требует работы с взаимосвязанными данными, где важно быстро обрабатывать и оптимизировать связи между объектами.

Рекомендуемая СУБД:

PostgreSQL с расширением pgRouting — если требуется использовать реляционную СУБД, то расширение для работы с маршрутами (pgRouting) добавит необходимые возможности для работы с данными.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД?
Лучше использовать одну СУБД. В данном случае можно использовать Neo4j или pgRouting для всех департаментов.
Отдел закупок также может использовать общую СУБД, если их задачи в части логистики (например, управление складскими запасами или выбор поставок) пересекаются с задачами логистики. Например, можно добавить таблицы или вершины и рёбра в граф для отображения связей между поставками и маршрутам доставки.

1.5.* Можно ли все перечисленные задачи решить, используя одну СУБД? Если да, то какую именно?
Теоретически, да, все задачи можно решить с помощью одной СУБД, например, PostgreSQL. PostgreSQL обладает высокой гибкостью. Для решения разных задач можно использовать:

Реляционные таблицы для задач по бюджетированию, качеству и нормативным данным.
JSONB и хранимые процедуры для интеграции с CRM.
Расширения pgRouting для задач по маршрутизации.
Такое решение может быть одним из оптимальных, так как PostgreSQL позволяет эффективно работать с различными типами данных, и в нем есть возможности для масштабирования и добавления новых функций через расширения.


---

### Задание 2

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.
2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

**********************

2.1. Пошаговый процесс пополнения баланса телефона (через ручную транзакцию)
Идентификация пользователя
Пользователь должен пройти процедуру аутентификации в системе (например, через логин и пароль, биометрические данные или двухфакторную аутентификацию), чтобы система могла подтвердить его личность.

Выбор метода пополнения
Пользователь выбирает способ пополнения (например, банковская карта, электронный кошелек, мобильный платеж и т.д.). Он вводит необходимые данные, такие как номер карты, срок действия и CVV, если это необходимо.

Проверка данных пользователя и средств
Система проверяет, есть ли у пользователя достаточно средств для пополнения. Если пополнение происходит через карту, банк проверяет доступность средств на счете пользователя. Если через электронный кошелек, система проверяет баланс.

Передача запроса на оплату
После успешной проверки данных и средств, система отправляет запрос на платеж в стороннюю платежную систему (например, в банк или платежный шлюз). Это может включать шифрование данных для безопасности.

Подтверждение транзакции
Платежная система или банк подтверждает транзакцию, проверяя правильность введённых данных (например, 3D Secure для карт). Пользователь может быть запрашиваем на дополнительное подтверждение (например, ввод SMS-кода для карты).

Зачисление средств на счёт телефона
После успешного подтверждения транзакции, система зачисляет средства на мобильный счёт. Пользователь получает уведомление о завершении операции, и баланс на его счете телефона увеличивается.

2.1.* Процесс пополнения счёта через автоплатёж
Идентификация пользователя
Пользователь должен быть заранее зарегистрирован в системе автоплатежей, предоставив свои платёжные данные (например, номер карты или реквизиты электронного кошелька).

Запуск автоплатежа
Система автоматически инициирует пополнение в соответствии с настройками, установленными пользователем (например, ежедневно, ежемесячно или при достижении определённого баланса).

Проверка данных пользователя и доступных средств
Система проверяет, есть ли у пользователя достаточно средств на платёжной карте или в другом источнике, который привязан к автоплатежу. Банк или платёжная система также проверяют корректность реквизитов и наличие средств.

Автоматическая авторизация и подтверждение транзакции
Платёжная система или банк автоматически выполняет авторизацию платежа, подтверждая, что средства можно списать с привязанного счёта.

Обработка платежа
Платёжная система списывает средства с привязанного источника платежа (например, банковской карты, электронного кошелька и т.д.) и передаёт запрос на пополнение баланса мобильного телефона.

Зачисление средств на счёт телефона
После подтверждения транзакции средства автоматически зачисляются на мобильный счёт. Пользователь может получить уведомление о том, что пополнение прошло успешно. В случае сбоя система обычно оповещает пользователя об ошибке и предпринимает попытки повторного списания средств в зависимости от настроек автоплатежа.


---

### Задание 3

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.
3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*********************

3.1. Пять преимуществ SQL-систем по отношению к NoSQL:
Гарантия целостности данных (ACID)
SQL-системы (реляционные базы данных) строго поддерживают ACID-принципы (атомарность, консистентность, изолированность и долговечность). Это обеспечивает строгую целостность данных и предотвращает возникновение ошибок, даже при сбоях системы. NoSQL базы данных часто не обеспечивают такую строгую гарантию (например, могут использовать принцип BASE вместо ACID).

Сложные запросы и агрегирование
SQL позволяет создавать сложные запросы с использованием JOIN-ов, подзапросов, оконных функций, группировок и агрегаций. Реляционные модели идеально подходят для работы с данными, которые имеют чётко определённые связи между собой. В NoSQL-системах работа с такими запросами может быть более сложной и менее эффективной, поскольку они ориентированы на простоту и масштабируемость.

Строгая схема и данные с предсказуемой структурой
В SQL-системах данные структурированы в таблицах с чётко определённой схемой. Это упрощает работу с данными, обеспечивая их единообразие и структуру. В NoSQL-системах, напротив, данные могут быть гибкими (например, документо-ориентированные или графовые базы), что может создавать трудности с управлением схемами и проверкой целостности.

Сложная реляционная модель данных
SQL хорошо подходит для работы с высокозависимыми и сложными данными, например, в банковских системах или системах учета, где требуется точная модель данных с отношениями между сущностями. NoSQL базы данных, как правило, не обладают такой поддержкой реляционных связей и могут использовать денормализацию, что не всегда эффективно для определённых задач.

Широкая поддержка и зрелость технологий
SQL-системы, такие как PostgreSQL, MySQL, Oracle, SQL Server, существуют уже несколько десятилетий и обладают высокой зрелостью. Они проверены в условиях разных типов бизнеса и технологий и имеют широкую экосистему инструментов для анализа, отчётности и резервного копирования. NoSQL-системы часто моложе и менее проверены в долговременной эксплуатации.

3.1.* Преимущества NewSQL систем перед SQL и NoSQL:
Высокая масштабируемость
NewSQL-системы предлагают горизонтальное масштабирование, что является ключевым преимуществом перед традиционными SQL-системами. Это означает, что можно добавлять новые серверы по мере роста нагрузки, что позволяет эффективно работать с большими объёмами данных и высокими требованиями к производительности (например, как в NoSQL).

Сохранение ACID- гарантий
В отличие от NoSQL, NewSQL-системы сохраняют строгие гарантии ACID, что гарантирует целостность и надёжность транзакций. Это критично для систем, которые требуют высокой точности данных, например, в финансовых или банковских приложениях.

Поддержка сложных запросов и SQL-совместимость
NewSQL-системы сохраняют поддержку SQL, что означает, что разработчики могут продолжать использовать привычные инструменты и методы работы с данными, включая сложные запросы, агрегирования и JOIN-операции. Это является важным преимуществом по сравнению с NoSQL, где может быть сложнее работать с такими запросами.

Сложные распределённые транзакции
NewSQL использует современные технологии для распределённой обработки данных, что позволяет эффективно управлять транзакциями в распределённых системах, сохраняя при этом целостность данных. Это решение лучше подходит для современных высоконагруженных приложений, чем традиционные SQL-системы, которые могут сталкиваться с ограничениями при горизонтальном масштабировании.

Поддержка гибридных рабочих нагрузок
NewSQL системы часто могут поддерживать как транзакционные, так и аналитические нагрузки в одном решении. Это делает их идеальными для многозадачных сред, где требуется одновременно работать с транзакциями и аналитикой, что сложно или невозможно сделать с традиционными SQL-системами или NoSQL.


---

### Задание 4

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.
На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

*****************

Критерии выбора СУБД для задачи с большим количеством вычислений и 1000 машин
Когда речь идет о работе с огромным количеством данных и распределенными вычислениями, критически важно выбрать СУБД, которая:

Поддерживает масштабируемость (горизонтальное и вертикальное масштабирование).
Предоставляет высокую производительность для обработки больших объемов данных.
Позволяет эффективно распределять вычисления между машинами.
Обеспечивает доступность и отказоустойчивость.
Предоставляет согласованность данных в условиях распределенной среды.
Для такой задачи стоит учитывать следующие типы СУБД и модели распределенных вычислений.

Ключевые критерии при выборе типа СУБД
Масштабируемость и горизонтальное распределение
Система должна поддерживать горизонтальное масштабирование, то есть быть способной распределять данные по множеству машин, чтобы обрабатывать огромные объемы данных параллельно. Это может быть реализовано через:

Шардирование — разделение данных на более мелкие части (шарды), которые хранятся на разных машинах.
Репликация — копирование данных на разные машины для обеспечения отказоустойчивости и улучшения производительности при чтении.
Тип данных и структура
Важно понимать, с каким типом данных вы работаете (структурированные, полуструктурированные или неструктурированные). Это определит выбор между реляционными, NoSQL или NewSQL системами:

SQL: подходит для данных с чёткой схемой и нуждающихся в транзакционной целостности (например, Google Spanner, CockroachDB).
NoSQL: если данные неструктурированы или требуют гибкости в схеме (например, Cassandra, HBase, MongoDB для определённых сценариев).
NewSQL: когда нужно сочетание горизонтальной масштабируемости и сохранение ACID-согласованности (например, Google Spanner, TiDB).
Согласованность, доступность и разделяемость (CAP-теорема)
В распределённых системах важно понимать компромисс между согласованностью, доступностью и устойчивостью к разделению сети (CAP). В зависимости от задачи можно выбрать СУБД, которая более приоритетно решает одну из этих проблем:

Согласованность (например, Google Spanner и CockroachDB для строго ACID-транзакций).
Доступность и устойчивость (например, Cassandra, Riak).
Время отклика и обработка запросов
Для больших объёмов данных важна скорость обработки запросов. Поэтому СУБД должна быть оптимизирована для высокоскоростных операций с данными, например, использование in-memory хранения или индексации.

Управление распределёнными вычислениями
Необходимо учитывать, насколько эффективно СУБД управляет распределёнными вычислениями. Возможности для выполнения параллельных вычислений на множестве узлов могут существенно повлиять на производительность.

Модели распределённых вычислений
MapReduce (Apache Hadoop, Apache Spark)
MapReduce — это одна из самых популярных моделей распределённых вычислений для обработки больших данных, которая эффективно использует концепцию мапинга (преобразования данных) и редуцирования (агрегирования и подсчёта результатов).

Hadoop: Обеспечивает возможность распределённой обработки больших объёмов данных с помощью Hadoop Distributed File System (HDFS) и MapReduce. Это подойдёт для задач, где важна обработка больших данных с минимальными требованиями к отклику.
Apache Spark: Предоставляет более высокую производительность за счет использования in-memory вычислений, что делает его идеальным выбором для задач с интенсивными вычислениями, таких как машинное обучение и аналитика больших данных.
Параллельные вычисления с распределёнными базами данных
Некоторые современные распределённые базы данных поддерживают параллельные вычисления прямо в самой базе данных:

Google Spanner или CockroachDB поддерживают распределённые вычисления с возможностью горизонтального масштабирования и обеспечения транзакционной целостности, что полезно для задач, где важна согласованность и атомарность операций.
Distributed SQL Engines
Для задач с транзакциями и SQL-совместимыми запросами, можно использовать NewSQL базы данных, такие как Google Spanner или TiDB. Эти системы предлагают высокую производительность, масштабируемость и сохраняют привычные SQL-операции при распределённых вычислениях.

Graph-based вычисления
Если задача требует работы с графовыми данными (например, социальные сети, рекомендации), то распределённые графовые базы данных, такие как Neo4j или JanusGraph, могут эффективно использовать параллельные вычисления для поиска и анализа связей между данными.

Какой тип СУБД и модель распределённых вычислений подойдут для задачи?
СУБД: NewSQL или распределённая SQL-система
В случае необходимости обеспечения масштабируемости, целостности данных и высокой производительности для огромного объёма данных, подходящими решениями будут распределённые NewSQL или SQL-системы, такие как:

Google Spanner или CockroachDB (для строго ACID-согласованных транзакций и горизонтального масштабирования).
TiDB (распределённая SQL-база, которая поддерживает горизонтальное масштабирование и SQL-совместимость).
Эти системы обеспечат хорошее сочетание параллельных вычислений, согласованности данных и высокой доступности.

Модель вычислений: Apache Spark (in-memory)
Для задачи, связанной с обработкой огромного объёма данных и вычислительными задачами, с учётом 1000 машин, лучшим выбором будет использование Apache Spark, так как он оптимизирован для работы с большими данными в распределённой среде и поддерживает in-memory вычисления, что значительно ускоряет обработку.

Почему Spark?

Он использует параллельные вычисления и поддерживает in-memory обработку данных, что даёт значительный прирост производительности.
Подходит для машинного обучения, анализов больших данных и потоковых вычислений.
Может работать с данными, хранящимися в разных хранилищах (например, HDFS, Amazon S3, базы данных и т.д.).
Заключение
Для задачи с большим количеством вычислений и 1000 машин лучший выбор будет сочетание:

NewSQL или распределённой SQL-системы для обеспечения транзакционной целостности и масштабируемости.
Apache Spark или Hadoop для выполнения распределённых вычислений, что обеспечит высокую производительность и быстрый доступ к данным в распределённой среде.
Такое решение обеспечит как необходимую масштабируемость для обработки большого объема данных, так и высокую скорость вычислений, что идеально подходит для задачи с интенсивными вычислениями и огромными объёмами данных.
